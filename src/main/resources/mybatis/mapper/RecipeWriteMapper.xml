<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.algore.application.recipe.dao.RecipeViewMapper">

    <resultMap id="categoryMap" type="com.algore.application.recipe.dto.RecipeCategoryDTO">
        <id property="categoryNum" column="CATEGORY_NUM"/>
        <result property="category" column="CATEGORY"/>
    </resultMap>

<select id="readcategory" resultMap="categoryMap">
    SELECT CATEGORY_NUM,
           CATEGORY
      FROM RECIPE_CATEGORY
</select>
    
<insert id="writeRecipe" parameterType="com.algore.application.recipe.dto.RecipeWriteDTO">
    INSERT INTO RECIPE
    (RECIPE_NUM, MEM_NUM, MAIN_PHOTO, PHOTO_PATH, RECIPE_TITLE, RECIPE_INTRO, RECIPE_VIDEO_LINK, TIP, RECIPE_CREATE_DATE)
    VALUES (SEQ_RECIPE_NUM.NEXTVAL,
            #{memNum},
            #{mainPhoto},
            #{categoryNum},
            #{photoPath},
            #{recipeTitle},
            #{recipeIntro},
            #{recipeVideoLink},
            #{tip},
            SYSDATE
            )
</insert>



<!--    <insert id="modifyPhoto" parameterType="java.util.List">-->
<!--        INSERT INTO RECIPE_PHOTO-->
<!--        (PHOTO_NUMBER , RECIPE_NUM , RECIPE_FILE_NAME , RECIPE_PATH)-->
<!--        SELECT SEQ_PHOTO_NUMBER.NEXTVAL , A.* FROM(-->
<!--        <foreach item="item" collection="list" separator="UNION ALL">-->
<!--            SELECT  #{item.recipeNum} AS  RECIPE_NUM ,-->
<!--            #{item.recipeFileName } AS RECIPE_FILE_NAME ,-->
<!--            #{item.recipePhotoPath } AS RECIPE_PATH-->
<!--            FROM DUAL-->
<!--        </foreach> )A-->

<!--    </insert>-->

<!--    <insert id = "ingredient">-->
<!--        INSERT INTO INGREDIENT-->
<!--        (ING_NUM, ING_NAME, ING_PRICE, CATEGORY, ING_UNIT)-->
<!--        VALUES (-->
<!--                #{ ingNum },-->
<!--                #{ ingName },-->
<!--                #{ ingPrice },-->
<!--                #{ category },-->
<!--                #{ ingUnit }-->
<!--               )-->
<!--    </insert>-->

<!--    <insert id = "member">-->
<!--        INSERT INTO MEMBER-->
<!--        (MEM_NUM, NICKNAME)-->
<!--        VALUES (-->
<!--                #{ memNum },-->
<!--                #{ nickname }-->
<!--               )-->
<!--    </insert>-->


<!--    -->
<!--    <insert id = "recipeIngredient">-->
<!--        INSERT INTO RECIPE_INGREDIENT-->
<!--        (ING_NUM, RECIPE_NUM, WEIGH, RI_UNIT)-->
<!--        VALUES (-->
<!--                #{ ingNum },-->
<!--                #{ recipeNum },-->
<!--                #{ weigh },-->
<!--                #{ riUnit }-->
<!--               )-->
<!--    </insert>-->

<!--    <insert id = "recipePhotoWrite">-->
<!--        INSERT INTO RECIPE_PHOTO-->
<!--        (PHOTO_NUMBER, RECIPE_NUM, RECIPE_FILE_NAME, RECIPE_PATH)-->
<!--        VALUES (-->
<!--                #{ photoNumber },-->
<!--                #{ recipeNum },-->
<!--                #{ recipeFileName },-->
<!--                #{ recipePath }-->
<!--               )-->
<!--    </insert>-->

<!--    <insert id="recipeProcedure">-->
<!--        INSERT INTO RECIPE_PROCEDURE-->
<!--        (RP_NUM, RECIPE_NUM, RP_FILE_NAME, RP_CONTENT, RP_PATH)-->
<!--        VALUES (-->
<!--                #{ rpNum },-->
<!--                #{ recipeNum },-->
<!--                #{ rpFileName },-->
<!--                #{ rpContent },-->
<!--                #{ rpPath}-->
<!--               )-->
<!--    </insert>-->
</mapper>